<% thumb =
  if service.cover_image.attached?
    service.cover_image
  elsif service.gallery_images.attached?
    service.gallery_images.first
  end
%>

<div class="rounded-2xl border border-slate-200 bg-white overflow-hidden hover:shadow-md transition">
  <div class="aspect-[16/10] bg-slate-100">
    <% if thumb.present? %>
      <%= image_tag thumb.variant(resize_to_fill: [800, 500]),
          class: "h-full w-full object-cover" %>
    <% else %>
      <div class="h-full w-full flex items-center justify-center text-slate-400 text-sm">
        No image
      </div>
    <% end %>
  </div>

  <div class="p-5">
    <p class="font-semibold text-slate-900"><%= service.name %></p>

    <% if service.business.present? %>
      <p class="mt-1 text-sm text-slate-600"><%= service.business.name %></p>
    <% end %>

    <div class="mt-3 flex items-center justify-between text-sm text-slate-600">
      <span>
        <% if service.price_cents.present? %>
          £<%= (service.price_cents / 100.0) %>
        <% else %>
          Price varies
        <% end %>
      </span>

      <span>
        <% if service.duration_min.present? %>
          <%= service.duration_min %> min
        <% else %>
          —
        <% end %>
      </span>
    </div>

    <div class="mt-4">
      <%= link_to "Book", "#",
          class: "inline-flex items-center justify-center w-full rounded-xl px-4 py-2.5 font-semibold text-white",
          style: "background:#2f66ff;" %>
      <p class="mt-2 text-xs text-slate-500 text-center">Booking flow next ✅</p>
    </div>
  </div>
</div>
