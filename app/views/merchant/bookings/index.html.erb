<%# app/views/merchant/bookings/index.html.erb %>

<div class="page-wrap py-10">
  <div class="flex items-end justify-between gap-6">
    <div>
      <h1 class="text-2xl font-semibold text-white">Bookings</h1>
      <p class="mt-2 text-white/70 text-sm">Latest customer bookings (inbox style).</p>
    </div>

    <%= link_to "Back to dashboard", merchant_root_path,
        class: "inline-flex px-5 py-2.5 rounded-full text-sm font-semibold border border-white/20 text-white hover:bg-white/10" %>
  </div>

  <div class="mt-6 space-y-3">
    <% if @bookings.present? %>
      <% @bookings.each do |b| %>
        <% starts_at = b.start_time %>
        <% svc = b.booking_items.first&.service %>

        <%= link_to merchant_booking_path(b),
            class: "block rounded-3xl border border-white/10 bg-white/5 backdrop-blur p-5 hover:bg-white/10 transition" do %>

          <div class="flex items-start justify-between gap-4">
            <div class="min-w-0">
              <p class="text-white font-semibold truncate">
                <%= b.customer_name.presence || "Customer" %>
              </p>
              <p class="mt-1 text-white/70 text-sm truncate">
                <%= svc&.name || "Service booking" %>
                <span class="text-white/40">Â·</span>
                <%= starts_at ? starts_at.strftime("%a %d %b, %H:%M") : "Time not set" %>
              </p>
            </div>

            <span class="shrink-0 rounded-full px-3 py-1 text-xs font-semibold border border-white/15 text-white/80">
              <%= b.status.to_s.capitalize %>
            </span>
          </div>

        <% end %>
      <% end %>
    <% else %>
      <div class="rounded-3xl border border-white/10 bg-white/5 backdrop-blur p-6 text-white/70">
        No bookings yet.
      </div>
    <% end %>
  </div>
</div>
